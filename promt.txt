Merhaba! Voice Classifier projesine GitHub'dan devam ediyorum. 

PROJE REPO: https://github.com/obensen/voice-classifier

MEVCUT DURUM: 
- Temel altyapÄ± tamamlandÄ± (schemas, cache, main, config, requirements)
- 13 endpoint'li FastAPI uygulamasÄ± hazÄ±r
- Comprehensive configuration sistemi var
- Mock responses ile test edilebilir durumda

SON KALINAN YER: 
PROGRESS_LOG.md dosyasÄ±na gÃ¶re ÅŸimdi `app/utils/audio_loader.py` dosyasÄ±nÄ± oluÅŸturacaÄŸÄ±z.

HEDEF: 
Ses dosyalarÄ±nÄ± yÃ¼kleme ve preprocessing altyapÄ±sÄ±nÄ± oluÅŸturmak.

DOSYA Ä°Ã‡ERÄ°ÄÄ°:
- Audio file loading (multiple formats)
- Format validation 
- Preprocessing (normalization, noise reduction, resampling)
- Metadata extraction
- Robust error handling

LÃ¼tfen audio_loader.py dosyasÄ±nÄ± oluÅŸtur ve PROGRESS_LOG.md'yi gÃ¼ncelle. Projenin mevcut yapÄ±sÄ±na uygun, config.py'deki ayarlarÄ± kullanan bir implementasyon istiyorum.






========================================================


# Voice Classifier Projesi - GitHub'dan Devam Prompt'u

## ğŸ¯ PROJE BÄ°LGÄ°LERÄ°

**Repo**: https://github.com/obensen/voice-classifier  
**Proje TÃ¼rÃ¼**: TTS (Text-to-Speech) ses analizi ve video kategorisi eÅŸleÅŸtirme sistemi  
**Teknoloji Stack**: FastAPI, PyTorch, Whisper, SpeechBrain, Librosa  
**Hedef**: Ses dosyalarÄ±nÄ± analiz ederek cinsiyet, yaÅŸ, dil, ton, duygu tespiti yapÄ±p video kategorilerine eÅŸleÅŸtirme

## ğŸ“Š MEVCUT DURUM

### âœ… TAMAMLANAN DOSYALAR (5/20)
1. **`app/models/schemas.py`** - Pydantic modelleri, Enum'lar, request/response yapÄ±larÄ±
2. **`app/utils/cache.py`** - In-memory cache sistemi, TTL, metrics
3. **`main.py`** - FastAPI uygulamasÄ±, 13 endpoint, async file handling  
4. **`app/config.py`** - KapsamlÄ± environment/configuration yÃ¶netimi
5. **`requirements.txt`** - ML, audio, web framework baÄŸÄ±mlÄ±lÄ±klarÄ±

### ğŸ”„ ÅU ANDA ÃœZERÄ°NDE Ã‡ALIÅILAN
**SÄ±radaki dosya**: `app/utils/audio_loader.py`

### ğŸ“‹ YAPILACAKLAR LÄ°STESÄ°
**Ã–ncelik 1 - Utils KatmanÄ±:**
- [ ] `app/utils/audio_loader.py` - Ses dosyasÄ± yÃ¼kleme, format validation, preprocessing
- [ ] `app/utils/feature_extract.py` - MFCC, spectral, prosodic feature extraction

**Ã–ncelik 2 - Servis KatmanÄ±:**
- [ ] `app/services/analysis_service.py` - Ana analiz koordinatÃ¶rÃ¼
- [ ] `app/services/whisper_language_service.py` - Dil tespiti (Whisper)
- [ ] `app/services/simple_gender_service.py` - Cinsiyet analizi
- [ ] `app/services/simple_age_service.py` - YaÅŸ analizi  
- [ ] `app/services/simple_tone_service.py` - Ton analizi
- [ ] `app/services/simple_emotion_service.py` - Duygu analizi
- [ ] `app/services/voice_category_matcher.py` - Kategori eÅŸleÅŸtirme
- [ ] `app/services/tts_analyzer_service.py` - TTS analiz koordinatÃ¶rÃ¼

## ğŸ—ï¸ PROJE MÄ°MARÄ°SÄ°

### Temel Veri AkÄ±ÅŸÄ±:
```
Audio File â†’ audio_loader.py â†’ feature_extract.py â†’ Analysis Services â†’ Category Matcher â†’ API Response
```

### Servis Mimarisi:
- **Singleton Pattern**: Servisler tek instance ile Ã§alÄ±ÅŸÄ±r (memory optimization)
- **Lazy Loading**: Modeller sadece gerektiÄŸinde yÃ¼klenir
- **Cache Strategy**: 5 dakika TTL ile sonuÃ§lar cache'lenir
- **Parallel Analysis**: TÃ¼m analizler aynÄ± anda Ã§alÄ±ÅŸÄ±r

### KonfigÃ¼rasyon Sistemi:
- **Environment Variables**: `.env` dosyasÄ±ndan yÃ¼klenir
- **Pydantic Settings**: Type-safe configuration management
- **Model Settings**: Her analiz tipi iÃ§in ayrÄ± threshold'lar
- **Audio Settings**: Format, sample rate, preprocessing ayarlarÄ±

## ğŸ“ DOSYA Ä°MPLEMENTASYON REHBERÄ°

### `audio_loader.py` Beklenen Ä°Ã§erik:
```python
class AudioLoader:
    def __init__(self, config: Settings)
    async def load_audio(self, file_path: str) -> AudioData
    def validate_format(self, file_path: str) -> bool
    def preprocess_audio(self, audio_data) -> ProcessedAudio
    def extract_metadata(self, file_path: str) -> AudioMetadata
    def resample_audio(self, audio, target_sr: int) -> AudioData
    def normalize_audio(self, audio) -> AudioData
```

**Ã–zellikler**:
- Desteklenen formatlar: WAV, MP3, FLAC, OGG, M4A, AAC
- File size kontrolÃ¼ (max 50MB)
- Duration kontrolÃ¼ (max 5 dakika)
- Preprocessing: normalization, noise reduction, resampling
- Error handling: corrupt files, unsupported formats

### Entegrasyon NoktalarÄ±:
- **config.py**: `get_audio_config()` methodunu kullan
- **cache.py**: File hash'lere gÃ¶re cache'leme
- **main.py**: `save_upload_file()` ile entegrasyon
- **schemas.py**: `AudioMetadata` model kullan

### Kod Stili:
- **Async/await**: TÃ¼m I/O iÅŸlemleri async
- **Type hints**: Full typing desteÄŸi
- **Error handling**: Try/catch ile robust error management
- **Logging**: Structured logging kullan
- **Performance**: Memory efficient processing

## ğŸ¯ CONTEXT PROMPT

Sen bu projeyi GitHub'dan aldÄ±ktan sonra ÅŸu ÅŸekilde devam et:

**"Merhaba! Voice Classifier projesine GitHub'dan devam ediyorum.**

**REPO**: https://github.com/obensen/voice-classifier

**DURUM**: Projenin temel altyapÄ±sÄ± tamamlandÄ± (main.py, config.py, schemas.py, cache.py, requirements.txt). Åimdi `app/utils/audio_loader.py` dosyasÄ±nÄ± implement edeceÄŸiz.

**HEDEFÄ°M**: Ses dosyalarÄ±nÄ± yÃ¼kleme, format validation, preprocessing ve metadata extraction iÅŸlemlerini yapan AudioLoader sÄ±nÄ±fÄ±nÄ± oluÅŸturmak.

**GEREKSÄ°NÄ°MLER**:
- config.py'deki audio settings'leri kullan
- Async/await pattern'i
- Desteklenen formatlar: WAV, MP3, FLAC, OGG, M4A, AAC  
- File validation (size, duration, format)
- Preprocessing: normalize, resample, noise reduction
- Metadata extraction: duration, sample_rate, channels
- Cache integration iÃ§in file hash desteÄŸi
- Robust error handling

Bu dosyayÄ± oluÅŸturduktan sonra PROGRESS_LOG.md'yi gÃ¼ncelle. Projenin mevcut yapÄ±sÄ±na uygun, performanslÄ± ve production-ready bir implementasyon istiyorum."**

## ğŸ” Ã–NEMLÄ° NOTLAR

1. **Mevcut Kod Kalitesi**: TÃ¼m dosyalar production-ready kalitede yazÄ±lmÄ±ÅŸ
2. **Type Safety**: Full type hints kullanÄ±lÄ±yor
3. **Error Handling**: Comprehensive error management var
4. **Performance**: Memory ve speed optimizations uygulanmÄ±ÅŸ
5. **Modularity**: GevÅŸek baÄŸlÄ±, yeniden kullanÄ±labilir kod
6. **Configuration**: Environment-based, flexible settings
7. **Testing**: Mock responses ile testable yapÄ±

**Bu prompt'u kullandÄ±ÄŸÄ±nda proje context'ini tam olarak anlayacaksÄ±n ve kaldÄ±ÄŸÄ±mÄ±z yerden devam edebileceksin.**